{{#if hasBlock}}
  {{yield this.openFormModal}}
{{/if}}

{{#ui-modal name="modal__form-creator" id=this.modalId}}
  <div class="header">
    {{if this.existingForm "Edit" "Create"}} Form
  </div>
  <div class="content ui form">
    <div class="field">
      <label for="form-name">Form Name* (for your use)</label>
      {{input
        type="text"
        value=this.form.name
        placeholder="Form Name"
        id="form-name"
      }}
    </div>

    <div class="field">
      <label for="form-title">Form Title* (employee-facing)</label>
      {{input
        type="text"
        value=this.form.title
        placeholder="Form Title"
        id="form-title"
      }}
    </div>

    <div class="field">
      <label for="form-description">Form Description (optional) (employee-facing)</label>
      {{textarea
        value=this.form.description
        placeholder="Employee-facing description of your form"
        id="form-description"
      }}
    </div>

    <div class="ui divider"></div>

    {{#if this.form.elements}}
      <div class="field right aligned icon">
        <button type="button" class="ui compact {{if this.showingPreview "green"}} button" {{action (toggle "showingPreview" this)}}>
          <i class="{{if this.showingPreview "un"}}hide icon"></i>
          {{if this.showingPreview "Hide "}}Preview Mode
        </button>
      </div>
    {{/if}}

    {{#sortable-group
      tagName="ol"
      class=this.sortGroupClass
      onChange="reorderElements"
      as |group|}}
      {{#each this.form.elements as |element index|}}
        {{form/form-element
          element
          group
          index=index
          tagName="li"
          class="form-element__list-item"
          showingPreview=this.showingPreview
          scoring=this.model.applicantScoring
          onRemove=(action "deleteFormElement")}}
      {{/each}}
    {{/sortable-group}}
    {{#unless this.showingPreview}}
      <button class="ui primary fluid button" type="button" {{action "addFormElement"}}><i class="plus icon"></i>Add a question</button>
    {{/unless}}
  </div>
  <div class="actions">
    <button class="ui red button" {{action this.closeModal}}>
      Close
    </button>
    <button class="ui green right labeled icon button" {{action
      (pipe
        (action this.saveModel this.form)
        (action this.closeModal)
        (action this.onCreateForm this.form)
      )
    }}>
      Save Form<i class="check icon"></i>
    </button>
  </div>
{{/ui-modal}}
