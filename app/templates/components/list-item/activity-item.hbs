{{! template-lint-disable no-triple-curlies}}
{{#if this.activity.icon}}
  <div class="label">
    <i class="{{if this.contextColor this.contextColor}} {{this.activity.icon}} icon"></i>
  </div>
{{/if}}

<div class="content">
  <div class="summary clearfix">
    {{{this.activity.descriptionHtml}}}
    {{#if this.activity.tag}}
      <span class="ui right ribbon green label">{{this.activity.tag}}</span>
    {{/if}}
  </div>
  <div class="meta">
    <a href="#" {{action "toggleComments"}}>
      {{ember-tooltip
        side="top"
        popperContainer="body"
        text="Comments"}}
      <i class="fitted comment icon"></i> {{if this.activity.comments.length this.activity.comments.length}}
    </a>

    {{#if this.enableLikes}}
      <a href="#" class="like {{if this.likeByCurrentUser "text-red"}}" {{action "like"}}>
        {{ember-tooltip
          side="top"
          popperContainer="body"
          text="Thumbs up"}}
        <i class="thumbs up icon"></i>
        {{#if this.likeByCurrentUser}}
          You
          {{#if this.likesMinusOne}}
            and {{this.likesMinusOne}} {{inflect-text "other" this.likesMinusOne}}
          {{/if}}
          like this
        {{else}}
          {{if this.activity.likes.length this.activity.likes.length}}
        {{/if}}
      </a>
    {{/if}}

    <div class="right floated date">
      {{time-ago this.activity.created}} on {{time this.activity.created "M/D/YY"}}
    </div>
  </div>

  {{#liquid-if this.showComments use="toUp"}}
    <form class="ui form account__comments-section" {{action "saveComment" on="submit"}}>
      <h6 class="ui horizontal divider header"><i class="fitted comments icon"></i> Comments</h6>
      <div class="field">
        <label for="comment-text" class="sr-only">Enter your comment</label>
        {{textarea name="comment-text" value=this.comment.text rows=2 placeholder="Type your comment..."}}
      </div>

      {{#liquid-if this.comment.text}}
        {{#form/action-button type="submit" class="ui large fluid green button" loading=this.working}}Save Comment{{/form/action-button}}
      {{/liquid-if}}
    </form>

    <div class="ui feed limited-pane">
      {{#each this.comments as |comment|}}
        {{list-item/comment-item comment=comment class="event"}}
      {{/each}}
    </div>
  {{else}}
    {{#if this.comments.firstObject}}
      <div class="account__comments-section account__comments-muted">
        <div class="ui feed limited-pane">
          {{list-item/comment-item comment=this.comments.firstObject class="event"}}
        </div>
      </div>
    {{/if}}
  {{/liquid-if}}
</div>
