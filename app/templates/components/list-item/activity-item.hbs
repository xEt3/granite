{{! template-lint-disable no-triple-curlies}}
{{#if activity.icon}}
  <div class="label">
    <i class="{{if contextColor contextColor}} {{activity.icon}} icon"></i>
  </div>
{{/if}}

<div class="content">
  <div class="summary clearfix">
    {{{activity.descriptionHtml}}}
    {{#if activity.tag}}
      <span class="ui right ribbon green label">{{activity.tag}}</span>
    {{/if}}
  </div>
  <div class="meta">
    <a href="#" {{action "toggleComments"}}>
      {{ember-tooltip
        side="top"
        popperContainer="body"
        text="Comments"}}
      <i class="fitted comment icon"></i> {{if activity.comments.length activity.comments.length}}
    </a>

    {{#if enableLikes}}
      <a href="#" class="like {{if likeByCurrentUser "text-red"}}" {{action "like"}}>
        {{ember-tooltip
          side="top"
          popperContainer="body"
          text="Thumbs up"}}
        <i class="thumbs up icon"></i>
        {{#if likeByCurrentUser}}
          You
          {{#if likesMinusOne}}
            and {{likesMinusOne}} {{inflect-text "other" likesMinusOne}}
          {{/if}}
          like this
        {{else}}
          {{if activity.likes.length activity.likes.length}}
        {{/if}}
      </a>
    {{/if}}

    <div class="right floated date">
      {{time-ago activity.created}} on {{time activity.created "M/D/YY"}}
    </div>
  </div>

  {{#liquid-if showComments use="toUp"}}
    <form class="ui form account__comments-section" {{action "saveComment" on="submit"}}>
      <h6 class="ui horizontal divider header"><i class="fitted comments icon"></i> Comments</h6>
      <div class="field">
        <label for="comment-text" class="sr-only">Enter your comment</label>
        {{textarea name="comment-text" value=comment.text rows=2 placeholder="Type your comment..."}}
      </div>

      {{#liquid-if comment.text}}
        {{#form/action-button type="submit" class="ui large fluid green button" loading=working}}Save Comment{{/form/action-button}}
      {{/liquid-if}}
    </form>

    <div class="ui feed limited-pane">
      {{#each comments as |comment|}}
        {{list-item/comment-item comment=comment class="event"}}
      {{/each}}
    </div>
  {{else}}
    {{#if comments.firstObject}}
      <div class="account__comments-section account__comments-muted">
        <div class="ui feed limited-pane">
          {{list-item/comment-item comment=comments.firstObject class="event"}}
        </div>
      </div>
    {{/if}}
  {{/liquid-if}}
</div>
