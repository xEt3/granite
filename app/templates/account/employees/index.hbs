{{stateful-intro-js
  user=auth.user
  steps=intros
  start-if=true
  hintKey='employees-index'}}

{{#if showFilters}}
  {{#display/filter-pane
    class="ui content form padded segment container"
    onChange=(action "updateFilter") as |filter|
  }}
    <h2>
      <i class="filter icon"></i> Filters
      <a href="#" class="ui small text right floated text-red" {{action "resetFilters"}}>Reset All</a>
    </h2>

    {{#filter.section 'Supervisor'}}
      {{#filter.selectControl
        'supervisor'
        supervisor
        searchable=true
        model=filterModels.employees as |item|
      }}
        {{item.fullName}}{{#if item.jobTitle}} - <span class="light text">{{item.jobTitle}}</span>{{/if}}
      {{/filter.selectControl}}
    {{/filter.section}}

    {{#filter.section 'Department'}}
      {{filter.selectControl
        'department'
        department
        searchable=true
        model=filterModels.departments
        itemTextPath='name'}}
    {{/filter.section}}

    {{#filter.section 'Location'}}
      {{filter.selectControl
        'location'
        location
        searchable=true
        model=filterModels.locations
        itemTextPath='name'}}
    {{/filter.section}}

    {{#filter.section 'Hire Date' resets=(array 'hireDateStart' 'hireDateEnd')}}
      {{#filter.control 'hireDate' (or hireDateStart hireDateEnd) class="two fields"}}
        {{#ui-calendar class="ui field" type="date" container="body" startMode="year" onChange=(action (mut hireDateStart))}}
          <label for="ui-calendar-date-only">Start Date</label>
          <div class="ui calendar" id="ui-calendar-date-only">
            <div class="ui input left icon">
              <i class="calendar icon"></i>
              <input type="text" value={{hireDateStart}} placeholder="Select or type a date">
            </div>
          </div>
        {{/ui-calendar}}
        {{#ui-calendar class="ui field" type="date" container="body" startMode="year" onChange=(action (mut hireDateEnd))}}
          <label for="ui-calendar-date-only">End Date</label>
          <div class="ui calendar" id="ui-calendar-date-only">
            <div class="ui input left icon">
              <i class="calendar icon"></i>
              <input type="text" value={{hireDateEnd}} placeholder="Select or type a date">
            </div>
          </div>
        {{/ui-calendar}}
      {{/filter.control}}
    {{/filter.section}}
  {{/display/filter-pane}}
{{/if}}

<div class="ui raised padded segment container clearfix">
  <hgroup class="clearfix">
    <h1 class="ui header left floated">
      Employees
    </h1>

    <div class="right aligned text floated menu__actions">
      <h3 class="ui right floated header">
        {{#ui-popup position="left center" content="Filters"}}
          <a href="#" class="{{if showFilters 'text-red'}}" {{action toggleProperty 'showFilters'}}>
            <i class="{{if showFilters 'remove' 'filter'}} icon"></i>
          </a>
        {{/ui-popup}}
      </h3>
      {{#ui-dropdown class="right floated top pointing inline"}}
        <h3 class="ui inline header"><a href="#" id="add-employee-trigger"><i class="plus icon"></i></a></h3>
        <div class="menu">
          {{#link-to 'account.employees.add.new' class="item"}}<i class="user icon"></i>One Employee{{/link-to}}
          {{#link-to 'account.employees.add.census' class="item"}}<i class="users icon"></i>Multiple Employees{{/link-to}}
        </div>
      {{/ui-dropdown}}
      {{#if auth.user.company.linkedToSlate}}
        <h3 class="ui right floated header">
          {{#ui-popup position="left center" content="Import from Slate Payroll..."}}
            <a href="#">
              <i class="sign in alternate icon"></i>
            </a>
          {{/ui-popup}}
        </h3>
      {{/if}}
    </div>
  </hgroup>

  <div class="ui divider"></div>

  {{display/resource-list
    model
    "list-item/employee-item"
    linkTo="account.employee"
    linkClass="item"
    class="ui divided link items"}}

  {{elements/x-pagination
    page=(readonly page)
    pages=(readonly pages)
    onchange=(action (mut page))}}
</div>
